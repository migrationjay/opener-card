<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëœë¤ ì§ˆë¬¸ ì¹´ë“œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .flip-card {
            transition: transform 1s ease-in-out;
            transform-style: preserve-3d;
        }
    </style>
</head>

<body class="min-h-screen bg-gradient-to-br from-blue-100 to-indigo-300 flex items-center justify-center p-4">

    <!-- ğŸŸ£ START PAGE -->
    <div id="startPage" class="w-full max-w-md space-y-8 text-center">
        <h1 class="text-4xl font-extrabold text-indigo-800 drop-shadow">ğŸ‰ ì˜¤í”„ë‹ ì§ˆë¬¸</h1>
        <p class="text-gray-700 text-lg">ë²„íŠ¼ì„ ëˆŒëŸ¬ ì§ˆë¬¸ì„ ì‹œì‘í•˜ì„¸ìš”!</p>
        <button onclick="start()" class="w-full py-4 rounded-xl bg-indigo-500 text-white text-xl font-bold hover:bg-indigo-600 transition">
            ì‹œì‘í•˜ê¸° ğŸš€
        </button>
    </div>

    <!-- ğŸŸ£ CARD PAGE -->
    <div id="cardPage" class="hidden w-full max-w-md space-y-6">

        <div id="cardBox" class="flip-card rounded-2xl shadow-2xl p-8 aspect-square flex flex-col justify-center items-center space-y-4 transition-all duration-500">
            <div id="question" class="text-xl font-semibold text-gray-800 text-center">ì§ˆë¬¸ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
            <div id="target" class="text-md text-gray-600 text-center">ëŒ€ë‹µí•  ì‚¬ëŒì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
        </div>

        <button id="nextBtn" onclick="nextQuestion()" class="w-full py-3 rounded-xl bg-indigo-500 text-white font-bold hover:bg-indigo-600 transition">
            ë‹¤ìŒ ì§ˆë¬¸ ğŸ”„
        </button>

    </div>

    <!-- ğŸ“¢ ë¡œì»¬ ì‚¬ìš´ë“œ -->
    <audio id="flipSound" src="./audio/bg.mp3" preload="auto"></audio>

    <script>
        const originalQuestions = [
            "ì–´ë¦´ ë•Œ ê°€ì¡Œë˜ ì¥ë˜í¬ë§ì€?",
            "ë‚´ ìŠ¤ë§ˆíŠ¸í° ì† ìµœê·¼ ì‚¬ì§„ì€?",
            "ìš”ì¦˜ ì¼í•  ë•Œ ì œì¼ ì¬ë¯¸ìˆëŠ” ê²ƒì€?",
            "ì§€ê¸ˆ ë‹¹ì¥ ì—¬í–‰ì„ ê°„ë‹¤ë©´?",
            "ë‚´ ì¸ìƒì—ì„œ ìµœê³ ì˜ ë³´ëŒëœ ìˆœê°„ì€?",
            "ìµœê·¼ ê°€ì¥ ê°ëª…ê¹Šê²Œ ë³¸ ì˜í™”ë‚˜ ë“œë¼ë§ˆëŠ”?",
            "ì´ˆëŠ¥ë ¥ì„ ê°€ì§„ë‹¤ë©´ ì–´ë–¤ ëŠ¥ë ¥ì„?"
        ];

        const finalQuestion = "ì˜¤ëŠ˜ ê³¼ì •ì— ëŒ€í•œ ê¸°ëŒ€ëŠ”?";

        const targets = [
            "ë‚´ ì–‘ ì˜†ì˜ ì‚¬ëŒì´ ë‹µí•©ë‹ˆë‹¤.",
            "ëª¨ë‘ê°€ ëŒì•„ê°€ë©° ë‹µí•©ë‹ˆë‹¤.",
            "ì˜¤ëŠ˜ ê°€ì¥ ì¼ì° ì˜¨ ì‚¬ëŒì´ ë‹µí•©ë‹ˆë‹¤.",
            "3ëª…ì„ ì§€ëª©í•´ì£¼ì„¸ìš”.",
            "ë‚˜ì™€ ë‚´ ì•ì‚¬ëŒì´ ë‹µí•©ë‹ˆë‹¤.",
            "ë‚´ ì–‘ ì˜†ì˜ ì‚¬ëŒì´ ë‹µí•©ë‹ˆë‹¤."
        ];

        const colors = [
            "bg-pink-100", "bg-green-100", "bg-yellow-100",
            "bg-blue-100", "bg-indigo-100", "bg-purple-100",
            "bg-rose-100", "bg-amber-100"
        ];

        let questions = [...originalQuestions];
        let usedFinal = false;
        let rotateDeg = 0;

        function start() {
            document.getElementById('startPage').classList.add('hidden');
            document.getElementById('cardPage').classList.remove('hidden');
            nextQuestion();
        }

        function nextQuestion() {
            const cardBox = document.getElementById('cardBox');
            const questionEl = document.getElementById('question');
            const targetEl = document.getElementById('target');
            const sound = document.getElementById('flipSound');

            // ì¹´ë“œ íšŒì „
            rotateDeg += 720;
            cardBox.style.transform = `rotateY(${rotateDeg}deg)`;

            // ì‚¬ìš´ë“œ ì¬ìƒ
            try {
                sound.currentTime = 0;
                sound.play().catch(e => console.warn("ì˜¤ë””ì˜¤ ì¬ìƒ ì‹¤íŒ¨:", e));
            } catch (e) {
                console.warn("ì˜¤ë””ì˜¤ ì˜ˆì™¸:", e);
            }

            setTimeout(() => {
                // ë°°ê²½ ìƒ‰ìƒ ë¬´ì‘ìœ„
                const baseClass = "flip-card rounded-2xl shadow-2xl p-8 aspect-square flex flex-col justify-center items-center space-y-4 transition-all duration-500";
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                cardBox.className = `${baseClass} ${randomColor}`;

                let questionText;
                let targetText = "";

                if (questions.length > 0) {
                    const randomIndex = Math.floor(Math.random() * questions.length);
                    questionText = questions.splice(randomIndex, 1)[0];
                    targetText = targets[Math.floor(Math.random() * targets.length)];
                } else if (!usedFinal) {
                    questionText = finalQuestion;
                    targetText = "ëª¨ë‘ê°€ ëŒì•„ê°€ë©° ë‹µí•©ë‹ˆë‹¤.";
                    usedFinal = true;
                } else {
                    questionText = "ëª¨ë“  ì§ˆë¬¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.";
                    targetText = "";
                    document.getElementById('nextBtn').disabled = true;
                    document.getElementById('nextBtn').classList.add('opacity-50', 'cursor-not-allowed');
                }

                questionEl.textContent = questionText;
                targetEl.textContent = targetText;

            }, 500);
        }
    </script>

</body>

</html>
